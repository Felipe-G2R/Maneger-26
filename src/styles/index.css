@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    scroll-behavior: smooth;
  }

  body {
    @apply bg-slate-50 dark:bg-dark-bg text-slate-900 dark:text-dark-text transition-colors duration-300;
  }

  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-slate-100 dark:bg-dark-card;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-slate-300 dark:bg-slate-600 rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-slate-400 dark:bg-slate-500;
  }
}

@layer components {
  .card {
    @apply bg-white dark:bg-dark-card rounded-2xl shadow-lg dark:shadow-none border border-slate-200 dark:border-dark-border p-6 transition-all duration-300;
  }

  .card-hover {
    @apply hover:shadow-xl hover:scale-[1.02] hover:border-primary-500/50;
  }

  .btn {
    @apply px-6 py-3 rounded-xl font-semibold transition-all duration-300 flex items-center justify-center gap-2;
  }

  .btn-primary {
    @apply bg-primary-500 hover:bg-primary-600 text-white shadow-lg shadow-primary-500/25 hover:shadow-primary-500/40;
  }

  .btn-secondary {
    @apply bg-slate-200 dark:bg-dark-border hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-800 dark:text-dark-text;
  }

  .btn-danger {
    @apply bg-red-500 hover:bg-red-600 text-white shadow-lg shadow-red-500/25;
  }

  .input {
    @apply w-full px-4 py-3 rounded-xl bg-slate-100 dark:bg-dark-border border border-slate-200 dark:border-slate-600 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-300;
  }

  .label {
    @apply block text-sm font-medium text-slate-600 dark:text-dark-muted mb-2;
  }

  .progress-bar {
    @apply h-3 bg-slate-200 dark:bg-dark-border rounded-full overflow-hidden;
  }

  .progress-fill {
    @apply h-full rounded-full transition-all duration-500 ease-out;
  }

  .category-badge {
    @apply px-3 py-1 rounded-full text-xs font-semibold uppercase tracking-wider;
  }

  .nav-link {
    @apply flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-300 text-slate-600 dark:text-dark-muted hover:bg-slate-100 dark:hover:bg-dark-card hover:text-slate-900 dark:hover:text-dark-text;
  }

  .nav-link.active {
    @apply bg-primary-500/10 text-primary-500 dark:text-primary-400 font-semibold;
  }

  .glass {
    @apply bg-white/80 dark:bg-dark-card/80 backdrop-blur-xl;
  }

  .gradient-text {
    @apply bg-gradient-to-r from-primary-500 to-purple-500 bg-clip-text text-transparent;
  }

  .animate-gradient {
    background-size: 200% 200%;
    animation: gradient 3s ease infinite;
  }
}

@keyframes gradient {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* Recording animation */
.recording-pulse {
  animation: recording-pulse 1.5s ease-in-out infinite;
}

@keyframes recording-pulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.1);
    opacity: 0.7;
  }
}

/* ========================================
   MOBILE / PWA OPTIMIZATIONS
   ======================================== */

/* Prevent pull-to-refresh on mobile */
html, body {
  overscroll-behavior-y: none;
}

/* Touch feedback */
.touch-feedback {
  -webkit-tap-highlight-color: transparent;
}

.touch-feedback:active {
  opacity: 0.7;
  transform: scale(0.98);
}

/* Mobile button sizes (min 44px for touch) */
@media (max-width: 1023px) {
  .btn {
    @apply min-h-[44px] px-4 py-2.5;
  }

  .input {
    @apply min-h-[44px] text-base;
  }

  /* Larger touch targets */
  button, a {
    min-height: 44px;
  }

  /* Cards mobile */
  .card {
    @apply p-4 rounded-xl;
  }

  /* Hide scrollbars on mobile */
  ::-webkit-scrollbar {
    display: none;
  }

  * {
    scrollbar-width: none;
  }
}

/* Safe areas for notch devices */
.safe-top {
  padding-top: env(safe-area-inset-top);
}

.safe-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}

.safe-left {
  padding-left: env(safe-area-inset-left);
}

.safe-right {
  padding-right: env(safe-area-inset-right);
}

/* Install PWA prompt animation */
.install-prompt {
  animation: slideUp 0.3s ease-out;
}

@keyframes slideUp {
  from {
    transform: translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

/* Swipe animations */
.swipe-card {
  transition: transform 0.3s ease;
}

.swipe-card.swiping {
  transition: none;
}

/* Skeleton loading */
.skeleton {
  @apply bg-slate-200 dark:bg-dark-border animate-pulse rounded;
}

/* Pull to refresh indicator */
.pull-indicator {
  @apply fixed top-0 left-1/2 -translate-x-1/2 z-50;
  transition: transform 0.2s, opacity 0.2s;
}

/* Haptic feedback simulation */
@keyframes haptic {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-2px); }
  75% { transform: translateX(2px); }
}

.haptic {
  animation: haptic 0.1s ease;
}

/* Smooth page transitions */
.page-enter {
  opacity: 0;
  transform: translateY(10px);
}

.page-enter-active {
  opacity: 1;
  transform: translateY(0);
  transition: opacity 0.2s, transform 0.2s;
}

.page-exit {
  opacity: 1;
}

.page-exit-active {
  opacity: 0;
  transition: opacity 0.2s;
}

/* Mobile modal fullscreen */
@media (max-width: 640px) {
  .modal-fullscreen {
    @apply fixed inset-0 rounded-none max-w-none max-h-none;
  }
}

/* Floating action button */
.fab {
  @apply fixed bottom-24 right-4 w-14 h-14 rounded-full shadow-2xl z-40;
  @apply flex items-center justify-center;
  @apply bg-primary-500 text-white;
  @apply active:scale-95 transition-transform;
}

/* Bottom navigation shadow */
.bottom-nav-shadow {
  box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.1);
}

/* Gesture hint */
.gesture-hint {
  @apply w-10 h-1 bg-slate-300 dark:bg-slate-600 rounded-full mx-auto;
}

/* Status bar safe area */
@supports (padding-top: env(safe-area-inset-top)) {
  .status-bar-safe {
    padding-top: env(safe-area-inset-top);
  }
}

/* Home indicator safe area */
@supports (padding-bottom: env(safe-area-inset-bottom)) {
  .home-indicator-safe {
    padding-bottom: max(1rem, env(safe-area-inset-bottom));
  }
}
